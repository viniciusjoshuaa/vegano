<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>CardÃ¡pio - Mandir</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="navbar">
  <div class="navbar-container">
    <div class="logo">ðŸ¥• Mandir</div>
    <ul class="menu">
      <li><a href="index.html">InÃ­cio</a></li>
      <li><a href="cardapio.html">CardÃ¡pio</a></li>
      <li><a href="historia.html">HistÃ³ria</a></li>
      <li><a href="planos.html">Nossos Planos</a></li>
    </ul>
   <!-- Direita -->
    <div class="navbar-buttons">
  <button class="btn-cart" onclick="window.location.href='carrinho.html'">
    ðŸ›’
  </button>
      <div class="navbar-buttons">
        <button class="btn-login" onclick="window.location.href='login.html'">Login</button>
        <button class="btn-signup" onclick="window.location.href='signup.html'">Signup</button>
      </div>
    </div>
  </nav>


<div class="container">
  <h1 class="titulo">Nosso CardÃ¡pio ðŸŒ±</h1>

  <!-- BOTÃƒO CRIAR PRATO PARA ADMIN -->
  <button id="btnCreate" style="display:none; width:16px; height:16px; margin-bottom:10px;">âž•</button>

  <div class="cardapio-container" id="cardapio"></div>
</div>

<div class="overlay" id="overlay"></div>

<div class="prato-modal" id="modal">
  <span class="modal-close" onclick="fecharModal()">âœ–</span>
  <div id="modal-content"></div>
</div>

<script>
const container = document.getElementById("cardapio");
const btnCreate = document.getElementById("btnCreate");

// SimulaÃ§Ã£o: pegar role do usuÃ¡rio logado
const userRole = localStorage.getItem("role"); // "admin" ou "cliente"
const dishes = JSON.parse(localStorage.getItem("dishes")) || [];

// Mostrar botÃ£o criar prato se for admin
if(userRole === "admin"){
  btnCreate.style.display = "inline-block";
  btnCreate.onclick = () => alert("Abrir modal para criar prato");
}

function renderCardapio(){
  container.innerHTML = "";
  dishes.forEach(prato => {
    const card = document.createElement("div");
    card.className = "prato-card";
    card.innerHTML = `
      <div class="prato-img" style="background-image:url('${prato.image || "https://via.placeholder.com/300"}')"></div>
      <div class="prato-content">
        <h3>${prato.name}</h3>
        <p>${prato.description}</p>
        <strong>R$ ${Number(prato.price).toFixed(2)}</strong>
      </div>
    `;

    // Ãcones de editar e deletar se admin
    if(userRole === "admin"){
      const edit = document.createElement("span");
      edit.textContent = "âœï¸";
      edit.style.cursor = "pointer";
      edit.style.marginLeft = "5px";
      edit.onclick = (e) => {
        e.stopPropagation();
        alert("Editar prato: " + prato.name);
      };

      const del = document.createElement("span");
      del.textContent = "ðŸ—‘ï¸";
      del.style.cursor = "pointer";
      del.style.marginLeft = "5px";
      del.onclick = (e) => {
        e.stopPropagation();
        alert("Excluir prato: " + prato.name);
      };

      card.querySelector(".prato-content").appendChild(edit);
      card.querySelector(".prato-content").appendChild(del);
    }

    card.onclick = () => abrirModal(prato);
    container.appendChild(card);
  });
}

function abrirModal(prato){
  document.getElementById("modal-content").innerHTML = `
    <div class="modal-img" style="background-image:url('${prato.image || "https://via.placeholder.com/400"}')"></div>
    <h2>${prato.name}</h2>
    <p><strong>DescriÃ§Ã£o:</strong> ${prato.description}</p>
    <p><strong>Ingredientes:</strong> ${prato.ingredients}</p>
    <p><strong>AlergÃªnicos:</strong> ${prato.allergens}</p>
    <p><strong>PreÃ§o:</strong> R$ ${Number(prato.price).toFixed(2)}</p>
  `;
  document.getElementById("overlay").style.display = "block";
  document.getElementById("modal").classList.add("open");
}

function fecharModal(){
  document.getElementById("overlay").style.display = "none";
  document.getElementById("modal").classList.remove("open");
}

renderCardapio();
</script>

</body>
</html>